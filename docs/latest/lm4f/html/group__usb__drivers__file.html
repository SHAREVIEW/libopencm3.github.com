<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libopencm3: Generic USB Drivers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libopencm3
   </div>
   <div id="projectbrief">A free/libre/open-source firmware library for various ARM Cortex-M3 microcontrollers.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__usb__drivers__file.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Generic USB Drivers</div>  </div>
</div><!--header-->
<div class="contents">

<p><b>Generic USB Drivers</b>  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3f1854d80f9d88cdb206a96e5f2b703e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#ga3f1854d80f9d88cdb206a96e5f2b703e">usbd_init</a> (const <a class="el" href="group__usb__driver__defines.html#gaf89d061a4e982ccc705dbf1fc7f14fca">usbd_driver</a> *driver, const struct <a class="el" href="structusb__device__descriptor.html">usb_device_descriptor</a> *dev, const struct <a class="el" href="structusb__config__descriptor.html">usb_config_descriptor</a> *conf, const char *const *strings, int num_strings, uint8_t *control_buffer, uint16_t control_buffer_size)</td></tr>
<tr class="memdesc:ga3f1854d80f9d88cdb206a96e5f2b703e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main initialization entry point.  <a href="#ga3f1854d80f9d88cdb206a96e5f2b703e">More...</a><br /></td></tr>
<tr class="separator:ga3f1854d80f9d88cdb206a96e5f2b703e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cdd6f2cd24e7e222b2add6e08283a7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#ga2cdd6f2cd24e7e222b2add6e08283a7e">usbd_register_reset_callback</a> (<a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *usbd_dev, void(*callback)(void))</td></tr>
<tr class="memdesc:ga2cdd6f2cd24e7e222b2add6e08283a7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a reset callback.  <a href="#ga2cdd6f2cd24e7e222b2add6e08283a7e">More...</a><br /></td></tr>
<tr class="separator:ga2cdd6f2cd24e7e222b2add6e08283a7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga064f9d058427b1fb6f40b35e03a8cd5b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#ga064f9d058427b1fb6f40b35e03a8cd5b">usbd_register_suspend_callback</a> (<a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *usbd_dev, void(*callback)(void))</td></tr>
<tr class="memdesc:ga064f9d058427b1fb6f40b35e03a8cd5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a suspend callback.  <a href="#ga064f9d058427b1fb6f40b35e03a8cd5b">More...</a><br /></td></tr>
<tr class="separator:ga064f9d058427b1fb6f40b35e03a8cd5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga004c77a73e4dcd6216678925f3fa1f41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#ga004c77a73e4dcd6216678925f3fa1f41">usbd_register_resume_callback</a> (<a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *usbd_dev, void(*callback)(void))</td></tr>
<tr class="memdesc:ga004c77a73e4dcd6216678925f3fa1f41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a resume callback.  <a href="#ga004c77a73e4dcd6216678925f3fa1f41">More...</a><br /></td></tr>
<tr class="separator:ga004c77a73e4dcd6216678925f3fa1f41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad8e688f14cac90c4933954e3ebbfc3b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#gad8e688f14cac90c4933954e3ebbfc3b7">usbd_register_sof_callback</a> (<a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *usbd_dev, void(*callback)(void))</td></tr>
<tr class="memdesc:gad8e688f14cac90c4933954e3ebbfc3b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a SOF callback.  <a href="#gad8e688f14cac90c4933954e3ebbfc3b7">More...</a><br /></td></tr>
<tr class="separator:gad8e688f14cac90c4933954e3ebbfc3b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3bc8dd33500621a1e900c78a42dcaf27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#ga3bc8dd33500621a1e900c78a42dcaf27">_usbd_reset</a> (<a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *usbd_dev)</td></tr>
<tr class="separator:ga3bc8dd33500621a1e900c78a42dcaf27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94eba5aff7befd8009cea2f2abb43134"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#ga94eba5aff7befd8009cea2f2abb43134">usbd_poll</a> (<a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *usbd_dev)</td></tr>
<tr class="separator:ga94eba5aff7befd8009cea2f2abb43134"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef20aadd330e4bb9e97635eeb751d8f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#gaef20aadd330e4bb9e97635eeb751d8f9">usbd_disconnect</a> (<a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *usbd_dev, bool disconnected)</td></tr>
<tr class="memdesc:gaef20aadd330e4bb9e97635eeb751d8f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect, if supported by the driver.  <a href="#gaef20aadd330e4bb9e97635eeb751d8f9">More...</a><br /></td></tr>
<tr class="separator:gaef20aadd330e4bb9e97635eeb751d8f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaadc222d45c63e01811952f8478ac7943"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#gaadc222d45c63e01811952f8478ac7943">usbd_ep_setup</a> (<a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *usbd_dev, uint8_t addr, uint8_t type, uint16_t max_size, <a class="el" href="group__usb__driver__defines.html#gadf842dd68c4c1334ece37faf7715d697">usbd_endpoint_callback</a> callback)</td></tr>
<tr class="memdesc:gaadc222d45c63e01811952f8478ac7943"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup an endpoint.  <a href="#gaadc222d45c63e01811952f8478ac7943">More...</a><br /></td></tr>
<tr class="separator:gaadc222d45c63e01811952f8478ac7943"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa5b245bdd9757cdc79d1fe721ebcf03f"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#gaa5b245bdd9757cdc79d1fe721ebcf03f">usbd_ep_write_packet</a> (<a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *usbd_dev, uint8_t addr, const void *buf, uint16_t len)</td></tr>
<tr class="memdesc:gaa5b245bdd9757cdc79d1fe721ebcf03f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a packet.  <a href="#gaa5b245bdd9757cdc79d1fe721ebcf03f">More...</a><br /></td></tr>
<tr class="separator:gaa5b245bdd9757cdc79d1fe721ebcf03f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd42dc86361dbf9c639fd883ada1f572"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#gabd42dc86361dbf9c639fd883ada1f572">usbd_ep_read_packet</a> (<a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *usbd_dev, uint8_t addr, void *buf, uint16_t len)</td></tr>
<tr class="memdesc:gabd42dc86361dbf9c639fd883ada1f572"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a packet.  <a href="#gabd42dc86361dbf9c639fd883ada1f572">More...</a><br /></td></tr>
<tr class="separator:gabd42dc86361dbf9c639fd883ada1f572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d16be856512df298e40dfa31a216172"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#ga6d16be856512df298e40dfa31a216172">usbd_ep_stall_set</a> (<a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *usbd_dev, uint8_t addr, uint8_t stall)</td></tr>
<tr class="memdesc:ga6d16be856512df298e40dfa31a216172"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set/clear STALL condition on an endpoint.  <a href="#ga6d16be856512df298e40dfa31a216172">More...</a><br /></td></tr>
<tr class="separator:ga6d16be856512df298e40dfa31a216172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga396b34ccbe5bf6718417ef3ee0c3b788"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#ga396b34ccbe5bf6718417ef3ee0c3b788">usbd_ep_stall_get</a> (<a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *usbd_dev, uint8_t addr)</td></tr>
<tr class="memdesc:ga396b34ccbe5bf6718417ef3ee0c3b788"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get STALL status of an endpoint.  <a href="#ga396b34ccbe5bf6718417ef3ee0c3b788">More...</a><br /></td></tr>
<tr class="separator:ga396b34ccbe5bf6718417ef3ee0c3b788"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f2a7dac5031fd8d1b5eb076d3f24b42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__drivers__file.html#ga2f2a7dac5031fd8d1b5eb076d3f24b42">usbd_ep_nak_set</a> (<a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *usbd_dev, uint8_t addr, uint8_t nak)</td></tr>
<tr class="memdesc:ga2f2a7dac5031fd8d1b5eb076d3f24b42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set an Out endpoint to NAK.  <a href="#ga2f2a7dac5031fd8d1b5eb076d3f24b42">More...</a><br /></td></tr>
<tr class="separator:ga2f2a7dac5031fd8d1b5eb076d3f24b42"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><b>Generic USB Drivers</b> </p>
<dl class="section version"><dt>Version</dt><dd>1.0.0</dd></dl>
<dl class="section author"><dt>Author</dt><dd> &copy;  2010 Gareth McMullin <a href="#" onclick="location.href='mai'+'lto:'+'gar'+'et'+'h@b'+'la'+'cks'+'ph'+'ere'+'.c'+'o.n'+'z'; return false;">garet<span style="display: none;">.nosp@m.</span>h@bl<span style="display: none;">.nosp@m.</span>acksp<span style="display: none;">.nosp@m.</span>here<span style="display: none;">.nosp@m.</span>.co.n<span style="display: none;">.nosp@m.</span>z</a></dd></dl>
<dl class="section date"><dt>Date</dt><dd>10 March 2013</dd></dl>
<p>LGPL License Terms <a class="el" href="lgpl_license.html">libopencm3 License</a> </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3bc8dd33500621a1e900c78a42dcaf27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3bc8dd33500621a1e900c78a42dcaf27">&#9670;&nbsp;</a></span>_usbd_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _usbd_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td>
          <td class="paramname"><em>usbd_dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00097">97</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

<p class="reference">References <a class="el" href="usbstd_8h_source.html#l00232">USB_ENDPOINT_ATTR_CONTROL</a>, and <a class="el" href="usb_8c_source.html#l00124">usbd_ep_setup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="usb__lm4f_8c_source.html#l00158">usb_disable_interrupts()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__usb__drivers__file_ga3bc8dd33500621a1e900c78a42dcaf27_cgraph.png" border="0" usemap="#group__usb__drivers__file_ga3bc8dd33500621a1e900c78a42dcaf27_cgraph" alt=""/></div>
<map name="group__usb__drivers__file_ga3bc8dd33500621a1e900c78a42dcaf27_cgraph" id="group__usb__drivers__file_ga3bc8dd33500621a1e900c78a42dcaf27_cgraph">
<area shape="rect" id="node2" href="group__usb__drivers__file.html#gaadc222d45c63e01811952f8478ac7943" title="Setup an endpoint. " alt="" coords="147,5,257,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__usb__drivers__file_ga3bc8dd33500621a1e900c78a42dcaf27_icgraph.png" border="0" usemap="#group__usb__drivers__file_ga3bc8dd33500621a1e900c78a42dcaf27_icgraph" alt=""/></div>
<map name="group__usb__drivers__file_ga3bc8dd33500621a1e900c78a42dcaf27_icgraph" id="group__usb__drivers__file_ga3bc8dd33500621a1e900c78a42dcaf27_icgraph">
<area shape="rect" id="node2" href="group__usb__file.html#ga86efee4380227664681caba4d4c2a010" title="Disable Specific USB Interrupts. " alt="" coords="147,5,299,32"/>
</map>
</div>

</div>
</div>
<a id="gaef20aadd330e4bb9e97635eeb751d8f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaef20aadd330e4bb9e97635eeb751d8f9">&#9670;&nbsp;</a></span>usbd_disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usbd_disconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td>
          <td class="paramname"><em>usbd_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>disconnected</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnect, if supported by the driver. </p>
<p>This function is implemented as weak function and can be replaced by an application specific version to handle chips that don't have built-in handling for this (e.g. STM32F1.) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">usbd_dev</td><td>the usb device handle returned from <a class="el" href="group__usb__drivers__file.html#ga3f1854d80f9d88cdb206a96e5f2b703e">usbd_init</a> </td></tr>
    <tr><td class="paramname">disconnected</td><td>true to request a disconnect </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00115">115</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

</div>
</div>
<a id="ga2f2a7dac5031fd8d1b5eb076d3f24b42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2f2a7dac5031fd8d1b5eb076d3f24b42">&#9670;&nbsp;</a></span>usbd_ep_nak_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usbd_ep_nak_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td>
          <td class="paramname"><em>usbd_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>nak</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set an Out endpoint to NAK. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">usbd_dev</td><td>the usb device handle returned from <a class="el" href="group__usb__drivers__file.html#ga3f1854d80f9d88cdb206a96e5f2b703e">usbd_init</a> </td></tr>
    <tr><td class="paramname">addr</td><td>EP address </td></tr>
    <tr><td class="paramname">nak</td><td>if nonzero, set NAK </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00152">152</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="usb__control_8c_source.html#l00286">_usbd_control_in()</a>, <a class="el" href="usb__control_8c_source.html#l00222">_usbd_control_setup()</a>, and <a class="el" href="usb__control_8c_source.html#l00198">usb_control_setup_write()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__usb__drivers__file_ga2f2a7dac5031fd8d1b5eb076d3f24b42_icgraph.png" border="0" usemap="#group__usb__drivers__file_ga2f2a7dac5031fd8d1b5eb076d3f24b42_icgraph" alt=""/></div>
<map name="group__usb__drivers__file_ga2f2a7dac5031fd8d1b5eb076d3f24b42_icgraph" id="group__usb__drivers__file_ga2f2a7dac5031fd8d1b5eb076d3f24b42_icgraph">
<area shape="rect" id="node2" href="usb__control_8c.html#a322b01bbbac6fb3c095d4bb6fc54184d" title="_usbd_control_in" alt="" coords="399,5,519,32"/>
<area shape="rect" id="node4" href="usb__control_8c.html#ad4bc495b7e757434644e1dece336b261" title="_usbd_control_setup" alt="" coords="388,56,531,83"/>
<area shape="rect" id="node5" href="group__usb__control__file.html#gab9305438ecc3aaa7359aacdbc4f55c29" title="usb_control_setup_write" alt="" coords="177,107,340,133"/>
<area shape="rect" id="node3" href="group__usb__drivers__file.html#ga3f1854d80f9d88cdb206a96e5f2b703e" title="Main initialization entry point. " alt="" coords="579,31,653,57"/>
</map>
</div>

</div>
</div>
<a id="gabd42dc86361dbf9c639fd883ada1f572"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabd42dc86361dbf9c639fd883ada1f572">&#9670;&nbsp;</a></span>usbd_ep_read_packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t usbd_ep_read_packet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td>
          <td class="paramname"><em>usbd_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a packet. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">usbd_dev</td><td>the usb device handle returned from <a class="el" href="group__usb__drivers__file.html#ga3f1854d80f9d88cdb206a96e5f2b703e">usbd_init</a> </td></tr>
    <tr><td class="paramname">addr</td><td>EP address </td></tr>
    <tr><td class="paramname">buf</td><td>user buffer that will receive data </td></tr>
    <tr><td class="paramname">len</td><td># of bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Actual # of bytes read </dd></dl>

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00136">136</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="usb__control_8c_source.html#l00240">_usbd_control_out()</a>, <a class="el" href="usb__msc_8c_source.html#l00544">msc_data_rx_cb()</a>, and <a class="el" href="usb__control_8c_source.html#l00121">usb_control_recv_chunk()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__usb__drivers__file_gabd42dc86361dbf9c639fd883ada1f572_icgraph.png" border="0" usemap="#group__usb__drivers__file_gabd42dc86361dbf9c639fd883ada1f572_icgraph" alt=""/></div>
<map name="group__usb__drivers__file_gabd42dc86361dbf9c639fd883ada1f572_icgraph" id="group__usb__drivers__file_gabd42dc86361dbf9c639fd883ada1f572_icgraph">
<area shape="rect" id="node2" href="usb__control_8c.html#a1a921e8785fafeee17c588aa26cff014" title="_usbd_control_out" alt="" coords="413,5,541,32"/>
<area shape="rect" id="node4" href="usb__msc_8c.html#a41a8c24958254f6628787f0a97befc1c" title="Handle the USB &#39;OUT&#39; requests. " alt="" coords="225,81,343,108"/>
<area shape="rect" id="node7" href="group__usb__control__file.html#gaf3b08c6a689c9f5a20f636507e70bb52" title="usb_control_recv_chunk" alt="" coords="203,31,365,57"/>
<area shape="rect" id="node3" href="group__usb__drivers__file.html#ga3f1854d80f9d88cdb206a96e5f2b703e" title="Main initialization entry point. " alt="" coords="601,5,676,32"/>
<area shape="rect" id="node5" href="usb__msc_8c.html#a226667566a4c9460bc577aa9c72a14b6" title="Setup the endpoints to be bulk &amp; register the callbacks. " alt="" coords="420,81,535,108"/>
<area shape="rect" id="node6" href="group__usb__msc.html#ga5e6959c3ac6ff4efab4fd3b59353f497" title="Initializes the USB Mass Storage subsystem. " alt="" coords="589,81,688,108"/>
</map>
</div>

</div>
</div>
<a id="gaadc222d45c63e01811952f8478ac7943"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaadc222d45c63e01811952f8478ac7943">&#9670;&nbsp;</a></span>usbd_ep_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usbd_ep_setup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td>
          <td class="paramname"><em>usbd_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>max_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#gadf842dd68c4c1334ece37faf7715d697">usbd_endpoint_callback</a>&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup an endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">usbd_dev</td><td>the usb device handle returned from <a class="el" href="group__usb__drivers__file.html#ga3f1854d80f9d88cdb206a96e5f2b703e">usbd_init</a> </td></tr>
    <tr><td class="paramname">addr</td><td>Full EP address including direction (e.g. 0x01 or 0x81) </td></tr>
    <tr><td class="paramname">type</td><td>Value for bmAttributes (USB_ENDPOINT_ATTR_*) </td></tr>
    <tr><td class="paramname">max_size</td><td>Endpoint max size </td></tr>
    <tr><td class="paramname">callback</td><td>your desired callback function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The stack only supports 8 endpoints, 0..7, so don't try and use arbitrary addresses here, even though USB itself would allow this. Not all backends support arbitrary addressing anyway. </dd></dl>

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00124">124</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="usb_8c_source.html#l00097">_usbd_reset()</a>, and <a class="el" href="usb__msc_8c_source.html#l00759">msc_set_config()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__usb__drivers__file_gaadc222d45c63e01811952f8478ac7943_icgraph.png" border="0" usemap="#group__usb__drivers__file_gaadc222d45c63e01811952f8478ac7943_icgraph" alt=""/></div>
<map name="group__usb__drivers__file_gaadc222d45c63e01811952f8478ac7943_icgraph" id="group__usb__drivers__file_gaadc222d45c63e01811952f8478ac7943_icgraph">
<area shape="rect" id="node2" href="group__usb__drivers__file.html#ga3bc8dd33500621a1e900c78a42dcaf27" title="_usbd_reset" alt="" coords="175,5,268,32"/>
<area shape="rect" id="node4" href="usb__msc_8c.html#a226667566a4c9460bc577aa9c72a14b6" title="Setup the endpoints to be bulk &amp; register the callbacks. " alt="" coords="164,56,279,83"/>
<area shape="rect" id="node3" href="group__usb__file.html#ga86efee4380227664681caba4d4c2a010" title="Disable Specific USB Interrupts. " alt="" coords="327,5,479,32"/>
<area shape="rect" id="node5" href="group__usb__msc.html#ga5e6959c3ac6ff4efab4fd3b59353f497" title="Initializes the USB Mass Storage subsystem. " alt="" coords="353,56,452,83"/>
</map>
</div>

</div>
</div>
<a id="ga396b34ccbe5bf6718417ef3ee0c3b788"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga396b34ccbe5bf6718417ef3ee0c3b788">&#9670;&nbsp;</a></span>usbd_ep_stall_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t usbd_ep_stall_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td>
          <td class="paramname"><em>usbd_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get STALL status of an endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">usbd_dev</td><td>the usb device handle returned from <a class="el" href="group__usb__drivers__file.html#ga3f1854d80f9d88cdb206a96e5f2b703e">usbd_init</a> </td></tr>
    <tr><td class="paramname">addr</td><td>Full EP address (with direction bit) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nonzero if endpoint is stalled </dd></dl>

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00147">147</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="usb__standard_8c_source.html#l00430">usb_standard_endpoint_get_status()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__usb__drivers__file_ga396b34ccbe5bf6718417ef3ee0c3b788_icgraph.png" border="0" usemap="#group__usb__drivers__file_ga396b34ccbe5bf6718417ef3ee0c3b788_icgraph" alt=""/></div>
<map name="group__usb__drivers__file_ga396b34ccbe5bf6718417ef3ee0c3b788_icgraph" id="group__usb__drivers__file_ga396b34ccbe5bf6718417ef3ee0c3b788_icgraph">
<area shape="rect" id="node2" href="group__usb__standard__file.html#ga5b44de9aabd46b65f87be92e0c19b155" title="usb_standard_endpoint\l_get_status" alt="" coords="180,23,336,65"/>
<area shape="rect" id="node3" href="usb__standard_8c.html#afc75bea6ba0b8d0d1bfccf96eceba818" title="_usbd_standard_request\l_endpoint" alt="" coords="384,23,548,65"/>
<area shape="rect" id="node4" href="usb__standard_8c.html#acbe64f834a6a41461dab4e179e5caa72" title="_usbd_standard_request" alt="" coords="596,31,760,57"/>
<area shape="rect" id="node5" href="group__usb__control__file.html#gaf0d388254ab4cbc34f2903cd7f9ce097" title="usb_control_request\l_dispatch" alt="" coords="808,23,947,65"/>
<area shape="rect" id="node6" href="group__usb__control__file.html#ga2149cd30a26a18c9c46e32db4aa5ef3e" title="usb_control_setup_read" alt="" coords="995,5,1155,32"/>
<area shape="rect" id="node9" href="usb__control_8c.html#a1a921e8785fafeee17c588aa26cff014" title="_usbd_control_out" alt="" coords="1210,56,1338,83"/>
<area shape="rect" id="node7" href="usb__control_8c.html#ad4bc495b7e757434644e1dece336b261" title="_usbd_control_setup" alt="" coords="1203,5,1345,32"/>
<area shape="rect" id="node8" href="group__usb__drivers__file.html#ga3f1854d80f9d88cdb206a96e5f2b703e" title="Main initialization entry point. " alt="" coords="1393,31,1468,57"/>
</map>
</div>

</div>
</div>
<a id="ga6d16be856512df298e40dfa31a216172"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6d16be856512df298e40dfa31a216172">&#9670;&nbsp;</a></span>usbd_ep_stall_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usbd_ep_stall_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td>
          <td class="paramname"><em>usbd_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>stall</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set/clear STALL condition on an endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">usbd_dev</td><td>the usb device handle returned from <a class="el" href="group__usb__drivers__file.html#ga3f1854d80f9d88cdb206a96e5f2b703e">usbd_init</a> </td></tr>
    <tr><td class="paramname">addr</td><td>Full EP address (with direction bit) </td></tr>
    <tr><td class="paramname">stall</td><td>if 0, clear STALL, else set stall. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00142">142</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="usb__control_8c_source.html#l00047">stall_transaction()</a>, <a class="el" href="usb__standard_8c_source.html#l00446">usb_standard_endpoint_stall()</a>, and <a class="el" href="usb__standard_8c_source.html#l00459">usb_standard_endpoint_unstall()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__usb__drivers__file_ga6d16be856512df298e40dfa31a216172_icgraph.png" border="0" usemap="#group__usb__drivers__file_ga6d16be856512df298e40dfa31a216172_icgraph" alt=""/></div>
<map name="group__usb__drivers__file_ga6d16be856512df298e40dfa31a216172_icgraph" id="group__usb__drivers__file_ga6d16be856512df298e40dfa31a216172_icgraph">
<area shape="rect" id="node2" href="group__usb__control__file.html#gaf6f522923d66ffdea79fbbd4decc31d4" title="stall_transaction" alt="" coords="819,84,936,111"/>
<area shape="rect" id="node10" href="group__usb__standard__file.html#gaee3cc13f9eb72b9069613111973c2a53" title="usb_standard_endpoint\l_stall" alt="" coords="180,201,336,242"/>
<area shape="rect" id="node14" href="group__usb__standard__file.html#gaaeffc19218b5fe5602582e45b68c897f" title="usb_standard_endpoint\l_unstall" alt="" coords="180,135,336,177"/>
<area shape="rect" id="node3" href="group__usb__control__file.html#gaf3b08c6a689c9f5a20f636507e70bb52" title="usb_control_recv_chunk" alt="" coords="995,185,1157,212"/>
<area shape="rect" id="node4" href="usb__control_8c.html#a1a921e8785fafeee17c588aa26cff014" title="_usbd_control_out" alt="" coords="1213,160,1341,187"/>
<area shape="rect" id="node6" href="group__usb__control__file.html#ga2149cd30a26a18c9c46e32db4aa5ef3e" title="usb_control_setup_read" alt="" coords="996,135,1156,161"/>
<area shape="rect" id="node8" href="group__usb__control__file.html#gab9305438ecc3aaa7359aacdbc4f55c29" title="usb_control_setup_write" alt="" coords="995,33,1157,60"/>
<area shape="rect" id="node9" href="usb__control_8c.html#a322b01bbbac6fb3c095d4bb6fc54184d" title="_usbd_control_in" alt="" coords="1217,8,1337,35"/>
<area shape="rect" id="node5" href="group__usb__drivers__file.html#ga3f1854d80f9d88cdb206a96e5f2b703e" title="Main initialization entry point. " alt="" coords="1396,109,1471,136"/>
<area shape="rect" id="node7" href="usb__control_8c.html#ad4bc495b7e757434644e1dece336b261" title="_usbd_control_setup" alt="" coords="1205,109,1348,136"/>
<area shape="rect" id="node11" href="usb__standard_8c.html#afc75bea6ba0b8d0d1bfccf96eceba818" title="_usbd_standard_request\l_endpoint" alt="" coords="384,169,548,210"/>
<area shape="rect" id="node12" href="usb__standard_8c.html#acbe64f834a6a41461dab4e179e5caa72" title="_usbd_standard_request" alt="" coords="596,176,760,203"/>
<area shape="rect" id="node13" href="group__usb__control__file.html#gaf0d388254ab4cbc34f2903cd7f9ce097" title="usb_control_request\l_dispatch" alt="" coords="808,169,947,210"/>
</map>
</div>

</div>
</div>
<a id="gaa5b245bdd9757cdc79d1fe721ebcf03f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa5b245bdd9757cdc79d1fe721ebcf03f">&#9670;&nbsp;</a></span>usbd_ep_write_packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t usbd_ep_write_packet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td>
          <td class="paramname"><em>usbd_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a packet. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">usbd_dev</td><td>the usb device handle returned from <a class="el" href="group__usb__drivers__file.html#ga3f1854d80f9d88cdb206a96e5f2b703e">usbd_init</a> </td></tr>
    <tr><td class="paramname">addr</td><td>EP address (direction is ignored) </td></tr>
    <tr><td class="paramname">buf</td><td>pointer to user data to write </td></tr>
    <tr><td class="paramname">len</td><td># of bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if failed, len if successful </dd></dl>

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00130">130</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="usb__control_8c_source.html#l00240">_usbd_control_out()</a>, <a class="el" href="usb__msc_8c_source.html#l00544">msc_data_rx_cb()</a>, <a class="el" href="usb__msc_8c_source.html#l00669">msc_data_tx_cb()</a>, <a class="el" href="usb__control_8c_source.html#l00093">usb_control_send_chunk()</a>, and <a class="el" href="usb__control_8c_source.html#l00173">usb_control_setup_read()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__usb__drivers__file_gaa5b245bdd9757cdc79d1fe721ebcf03f_icgraph.png" border="0" usemap="#group__usb__drivers__file_gaa5b245bdd9757cdc79d1fe721ebcf03f_icgraph" alt=""/></div>
<map name="group__usb__drivers__file_gaa5b245bdd9757cdc79d1fe721ebcf03f_icgraph" id="group__usb__drivers__file_gaa5b245bdd9757cdc79d1fe721ebcf03f_icgraph">
<area shape="rect" id="node2" href="usb__control_8c.html#a1a921e8785fafeee17c588aa26cff014" title="_usbd_control_out" alt="" coords="635,11,763,37"/>
<area shape="rect" id="node4" href="usb__msc_8c.html#a41a8c24958254f6628787f0a97befc1c" title="Handle the USB &#39;OUT&#39; requests. " alt="" coords="229,49,348,76"/>
<area shape="rect" id="node7" href="usb__msc_8c.html#a88700274691bf361f44a0e3b5703ec9f" title="Handle the USB &#39;IN&#39; requests. " alt="" coords="229,100,348,127"/>
<area shape="rect" id="node8" href="group__usb__control__file.html#ga46375610ee21a2c8ab4a06fe3bd70291" title="usb_control_send_chunk" alt="" coords="205,201,372,228"/>
<area shape="rect" id="node9" href="group__usb__control__file.html#ga2149cd30a26a18c9c46e32db4aa5ef3e" title="usb_control_setup_read" alt="" coords="420,151,580,177"/>
<area shape="rect" id="node3" href="group__usb__drivers__file.html#ga3f1854d80f9d88cdb206a96e5f2b703e" title="Main initialization entry point. " alt="" coords="819,151,893,177"/>
<area shape="rect" id="node5" href="usb__msc_8c.html#a226667566a4c9460bc577aa9c72a14b6" title="Setup the endpoints to be bulk &amp; register the callbacks. " alt="" coords="443,75,557,101"/>
<area shape="rect" id="node6" href="group__usb__msc.html#ga5e6959c3ac6ff4efab4fd3b59353f497" title="Initializes the USB Mass Storage subsystem. " alt="" coords="650,75,749,101"/>
<area shape="rect" id="node11" href="usb__control_8c.html#a322b01bbbac6fb3c095d4bb6fc54184d" title="_usbd_control_in" alt="" coords="440,201,560,228"/>
<area shape="rect" id="node10" href="usb__control_8c.html#ad4bc495b7e757434644e1dece336b261" title="_usbd_control_setup" alt="" coords="628,151,771,177"/>
</map>
</div>

</div>
</div>
<a id="ga3f1854d80f9d88cdb206a96e5f2b703e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3f1854d80f9d88cdb206a96e5f2b703e">&#9670;&nbsp;</a></span>usbd_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a>* usbd_init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__usb__driver__defines.html#gaf89d061a4e982ccc705dbf1fc7f14fca">usbd_driver</a> *&#160;</td>
          <td class="paramname"><em>driver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structusb__device__descriptor.html">usb_device_descriptor</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structusb__config__descriptor.html">usb_config_descriptor</a> *&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const *&#160;</td>
          <td class="paramname"><em>strings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_strings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>control_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>control_buffer_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main initialization entry point. </p>
<p>Initialize the USB firmware library to implement the USB device described by the descriptors provided.</p>
<p>It is required that the 48MHz USB clock is already available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">driver</td><td>TODO </td></tr>
    <tr><td class="paramname">dev</td><td>Pointer to USB device descriptor. This must not be changed while the device is in use. </td></tr>
    <tr><td class="paramname">conf</td><td>Pointer to array of USB configuration descriptors. These must not be changed while the device is in use. The length of this array is determined by the bNumConfigurations field in the device descriptor. </td></tr>
    <tr><td class="paramname">strings</td><td>Pointer to an array of strings for USB string descriptors. Referenced in <em>iSomething</em> fields, e.g. <em>iManufacturer</em>. Since a zero index means "no string", an iSomething value of 1 refers strings[0]. </td></tr>
    <tr><td class="paramname">num_strings</td><td>Number of items in <em>strings</em> array. </td></tr>
    <tr><td class="paramname">control_buffer</td><td>Pointer to array that would hold the data received during control requests with DATA stage </td></tr>
    <tr><td class="paramname">control_buffer_size</td><td>Size of control_buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the usb device initialized for use. (currently cannot fail).</dd></dl>
<p>To place <em>strings</em> entirely into Flash/read-only memory, use </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> * <span class="keyword">const</span> strings[] = { ... }; </div></div><!-- fragment --><p> (note the double <em>const</em>.) The first <em>const</em> refers to the strings while the second <em>const</em> refers to the array. </p>

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00042">42</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

<p class="reference">References <a class="el" href="usb__control_8c_source.html#l00286">_usbd_control_in()</a>, <a class="el" href="usb__control_8c_source.html#l00240">_usbd_control_out()</a>, and <a class="el" href="usb__control_8c_source.html#l00222">_usbd_control_setup()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__usb__drivers__file_ga3f1854d80f9d88cdb206a96e5f2b703e_cgraph.png" border="0" usemap="#group__usb__drivers__file_ga3f1854d80f9d88cdb206a96e5f2b703e_cgraph" alt=""/></div>
<map name="group__usb__drivers__file_ga3f1854d80f9d88cdb206a96e5f2b703e_cgraph" id="group__usb__drivers__file_ga3f1854d80f9d88cdb206a96e5f2b703e_cgraph">
<area shape="rect" id="node2" href="usb__control_8c.html#a322b01bbbac6fb3c095d4bb6fc54184d" title="_usbd_control_in" alt="" coords="340,243,460,270"/>
<area shape="rect" id="node8" href="usb__control_8c.html#a1a921e8785fafeee17c588aa26cff014" title="_usbd_control_out" alt="" coords="135,116,263,143"/>
<area shape="rect" id="node31" href="usb__control_8c.html#ad4bc495b7e757434644e1dece336b261" title="_usbd_control_setup" alt="" coords="128,294,271,320"/>
<area shape="rect" id="node3" href="group__usb__control__file.html#gaf6f522923d66ffdea79fbbd4decc31d4" title="stall_transaction" alt="" coords="554,142,671,168"/>
<area shape="rect" id="node5" href="group__usb__control__file.html#ga46375610ee21a2c8ab4a06fe3bd70291" title="usb_control_send_chunk" alt="" coords="529,243,696,270"/>
<area shape="rect" id="node7" href="group__usb__driver__defines.html#ga2f2a7dac5031fd8d1b5eb076d3f24b42" title="Set an Out endpoint to NAK. " alt="" coords="551,192,675,219"/>
<area shape="rect" id="node4" href="group__usb__driver__defines.html#ga6d16be856512df298e40dfa31a216172" title="Set/clear STALL condition on an endpoint. " alt="" coords="1437,360,1563,387"/>
<area shape="rect" id="node6" href="group__usb__driver__defines.html#gaa5b245bdd9757cdc79d1fe721ebcf03f" title="Write a packet. " alt="" coords="750,243,902,270"/>
<area shape="rect" id="node9" href="group__usb__control__file.html#gaf3b08c6a689c9f5a20f636507e70bb52" title="usb_control_recv_chunk" alt="" coords="319,91,481,118"/>
<area shape="rect" id="node10" href="group__usb__driver__defines.html#gabd42dc86361dbf9c639fd883ada1f572" title="Read a packet. " alt="" coords="538,66,687,92"/>
<area shape="rect" id="node11" href="group__usb__control__file.html#gaf0d388254ab4cbc34f2903cd7f9ce097" title="usb_control_request\l_dispatch" alt="" coords="543,396,682,437"/>
<area shape="rect" id="node12" href="usb__standard_8c.html#acbe64f834a6a41461dab4e179e5caa72" title="_usbd_standard_request" alt="" coords="744,407,908,434"/>
<area shape="rect" id="node13" href="usb__standard_8c.html#ad4b5fbce5b5ee6b5d5a80982d07cc6ba" title="_usbd_standard_request\l_device" alt="" coords="956,618,1120,660"/>
<area shape="rect" id="node22" href="usb__standard_8c.html#afc75bea6ba0b8d0d1bfccf96eceba818" title="_usbd_standard_request\l_endpoint" alt="" coords="956,414,1120,456"/>
<area shape="rect" id="node27" href="usb__standard_8c.html#abaef3eb2d690b8e6c910c915bdb14cfc" title="_usbd_standard_request\l_interface" alt="" coords="956,265,1120,306"/>
<area shape="rect" id="node14" href="group__usb__standard__file.html#ga8125b06ea30e4ef79ecafccd965de1b8" title="usb_standard_device\l_get_status" alt="" coords="1199,753,1344,794"/>
<area shape="rect" id="node15" href="group__usb__standard__file.html#ga0e3f83f09688d942f67ab39bff3e43b5" title="usb_standard_get_configuration" alt="" coords="1168,550,1375,576"/>
<area shape="rect" id="node16" href="group__usb__standard__file.html#ga12438265bb7878a71c30b8c46d5c985c" title="usb_standard_get_descriptor" alt="" coords="1177,600,1366,627"/>
<area shape="rect" id="node20" href="group__usb__standard__file.html#ga9feca6a1aaa7743e7f432433c5acc17c" title="usb_standard_set_address" alt="" coords="1182,651,1361,678"/>
<area shape="rect" id="node21" href="group__usb__standard__file.html#ga5c1d8b8f257bcd8edcca076a97fafdfb" title="usb_standard_set_configuration" alt="" coords="1168,702,1375,728"/>
<area shape="rect" id="node17" href="group__usb__standard__file.html#gaf52328d55b34702e49cb14ec9005ca19" title="usb_descriptor_index" alt="" coords="1427,651,1573,678"/>
<area shape="rect" id="node18" href="group__usb__standard__file.html#ga2df65bb0dcba3643cde420b3fdc08ff0" title="usb_descriptor_type" alt="" coords="1431,550,1569,576"/>
<area shape="rect" id="node19" href="group__usb__standard__file.html#gaf8a21c66ec88535a258872791c468098" title="build_config_descriptor" alt="" coords="1423,600,1577,627"/>
<area shape="rect" id="node23" href="group__usb__standard__file.html#ga5b44de9aabd46b65f87be92e0c19b155" title="usb_standard_endpoint\l_get_status" alt="" coords="1193,484,1349,525"/>
<area shape="rect" id="node25" href="group__usb__standard__file.html#gaee3cc13f9eb72b9069613111973c2a53" title="usb_standard_endpoint\l_stall" alt="" coords="1193,353,1349,394"/>
<area shape="rect" id="node26" href="group__usb__standard__file.html#gaaeffc19218b5fe5602582e45b68c897f" title="usb_standard_endpoint\l_unstall" alt="" coords="1193,418,1349,460"/>
<area shape="rect" id="node24" href="group__usb__driver__defines.html#ga396b34ccbe5bf6718417ef3ee0c3b788" title="Get STALL status of an endpoint. " alt="" coords="1437,491,1563,518"/>
<area shape="rect" id="node28" href="group__usb__standard__file.html#ga5359fd9e4c05b1862845496252569b4f" title="usb_standard_get_interface" alt="" coords="1180,184,1363,211"/>
<area shape="rect" id="node29" href="group__usb__standard__file.html#ga0c19391762e8ed41587b726e1422dcc2" title="usb_standard_interface\l_get_status" alt="" coords="1193,236,1350,277"/>
<area shape="rect" id="node30" href="group__usb__standard__file.html#ga84df7c90d695a9d2c034cd01a6af8c30" title="usb_standard_set_interface" alt="" coords="1180,302,1363,328"/>
<area shape="rect" id="node32" href="group__usb__control__file.html#ga2149cd30a26a18c9c46e32db4aa5ef3e" title="usb_control_setup_read" alt="" coords="320,344,480,371"/>
<area shape="rect" id="node34" href="group__usb__control__file.html#gab9305438ecc3aaa7359aacdbc4f55c29" title="usb_control_setup_write" alt="" coords="319,192,481,219"/>
<area shape="rect" id="node33" href="group__usb__control__file.html#ga2af2fb78551d9e7f89f031698d972238" title="If we&#39;re replying with some data, but less than the host is expecting, then we normally just do a sho..." alt="" coords="572,344,653,371"/>
</map>
</div>

</div>
</div>
<a id="ga94eba5aff7befd8009cea2f2abb43134"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga94eba5aff7befd8009cea2f2abb43134">&#9670;&nbsp;</a></span>usbd_poll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usbd_poll </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td>
          <td class="paramname"><em>usbd_dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00110">110</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

</div>
</div>
<a id="ga2cdd6f2cd24e7e222b2add6e08283a7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2cdd6f2cd24e7e222b2add6e08283a7e">&#9670;&nbsp;</a></span>usbd_register_reset_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usbd_register_reset_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td>
          <td class="paramname"><em>usbd_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a reset callback. </p>

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00075">75</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

</div>
</div>
<a id="ga004c77a73e4dcd6216678925f3fa1f41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga004c77a73e4dcd6216678925f3fa1f41">&#9670;&nbsp;</a></span>usbd_register_resume_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usbd_register_resume_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td>
          <td class="paramname"><em>usbd_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a resume callback. </p>

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00086">86</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

</div>
</div>
<a id="gad8e688f14cac90c4933954e3ebbfc3b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad8e688f14cac90c4933954e3ebbfc3b7">&#9670;&nbsp;</a></span>usbd_register_sof_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usbd_register_sof_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td>
          <td class="paramname"><em>usbd_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a SOF callback. </p>

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00092">92</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

</div>
</div>
<a id="ga064f9d058427b1fb6f40b35e03a8cd5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga064f9d058427b1fb6f40b35e03a8cd5b">&#9670;&nbsp;</a></span>usbd_register_suspend_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usbd_register_suspend_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usb__driver__defines.html#ga398cbe724daaf03b101d88163e7c1fce">usbd_device</a> *&#160;</td>
          <td class="paramname"><em>usbd_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a suspend callback. </p>

<p class="definition">Definition at line <a class="el" href="usb_8c_source.html#l00080">80</a> of file <a class="el" href="usb_8c_source.html">usb.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Aug 28 2019 23:11:36 for libopencm3 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
